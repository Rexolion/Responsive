<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex">
  <link rel="stylesheet" href="style/style.css">
  <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>

<body>
  <div class="container">
    <div class="header">
      <img alt="Яндекс Дом" src="/style/assets/ЯндексДом.svg">
      <a href="main.html">Сводка</a>
      <a href="">Устройства</a>
      <a href="">Сценарии</a>
      <a href="webcam.html" class="active">Видеонаблюдение</a>
      </a>
    </div>

    <div class="multimedia-menu-container">
      <div class="events-heading">
        Видеонаблюдение
      </div>
      <section class="stream">
        <div class="stream-row">
          <div class="stream__video__container">
            <video id="video-1" class="stream__video" controls muted autoplay></video>
            <a href="#popup-stream" class="stream__btn-expend">+</a>
          </div>
          <div class="stream__video__container">
            <video id="video-2" class="stream__video" controls muted autoplay></video>
            <a href="#popup-stream" class="stream__btn-expend">+</a>
          </div>
          <div class="stream__video__container">
            <video id="video-3" class="stream__video" controls muted autoplay></video>
            <a href="#popup-stream" class="stream__btn-expend">+</a>
          </div>
          <div class="stream__video__container">
            <video id="video-4" class="stream__video" controls muted autoplay></video>
            <a href="#popup-stream" class="stream__btn-expend">+</a>
          </div>
        </div>
    </div>
    </section>
  </div>

  <script>
    function initVideo(video, url) {
      if (Hls.isSupported()) {
        var hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, function () {
          video.play();
        });
      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = 'https://video-dev.github.io/streams/x36xhzz/x36xhzz.m3u8';
        video.addEventListener('loadedmetadata', function () {
          video.play();
        });
      }
    }

    initVideo(
      document.getElementById('video-1'),
      'http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fsosed%2Fmaster.m3u8'
    );

    initVideo(
      document.getElementById('video-2'),
      'http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fcat%2Fmaster.m3u8'
    );

    initVideo(
      document.getElementById('video-3'),
      'http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fdog%2Fmaster.m3u8'
    );

    initVideo(
      document.getElementById('video-4'),
      'http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fhall%2Fmaster.m3u8'
    );
  </script>

  <div class="footer">
    <div class="item">
      <a href="">Помощь</a>
      <a href="">Обратная связь</a>
      <a href="">Разработчикам</a>
      <a href="">Условия использования</a>
      <a href="/style/misc/license.pdf">Лицензия</a>
    </div>
  </div>
  <div class="popup" id="popup-stream">
            
      <div class="popup__container popup__container--stream">
              <div class="stream__expanded">
                  </div>
          <div class="popup__content">
              <div class="stream__controls">
                  <div class="stream__controls__row">
                      <div class="popup__controls">
                          <input id="input-contrast" type="range" min="1" max="200" value="100" class="popup__slider popup__slider--temperature">
                      </div>
                      <div class="popup__controls">
                          <input id="input-brightness" type="range" min="1" max="200" value="100" class="popup__slider popup__slider--light">
                      </div>
                  </div>
                  <div class="stream__volume">
                      <canvas id="analyzer" width="30" height="150"></canvas>
                  </div>

              </div>
          </div>
          <div class="popup__buttons--container">
              <div class="popup__buttons--content">

                  <a href="#" class="btn" id="close-btn">
                      <h3 class="heading--button">
                          Закрыть
                      </h3>
                  </a>
              </div>
          </div>
      </div>
  
  </div>
  <script src="/script/multimedia/main.js"></script>
</body>

</html>